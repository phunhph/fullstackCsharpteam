@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
<head>
	<link href="~/css/form.css" rel="stylesheet" />
</head>
<body>
    <div class="row">
        <div class="col-sm-4">
            <div class="text">
                <h1>Đăng ký nghỉ</h1>
            </div>
            <form role="form" method="post">
                <label for="id_nv">Mã Nhân viên</label><br />
                <input type="text"
                       id="id_nv"
                       name="id_nv"
                       placeholder="Nhập mã nhân viên" />
                <br />
                <label for="Start">Nghỉ từ</label><br />
                <input type="datetime-local" name="start" id="Start" /> <br />
                <label for="End">Đến</label><br />
                <input type="datetime-local" name="end" id="End" onblur="checkTime()" /><br />
                <p id="err" style="display: none"></p>
                <button asp-controller="Form" asp-action="FormPush" class="commit">Đăng ký</button>
            </form>
        </div>
        <div class="col-sm-4 showform">
            <table style="width: 90%">
                <h1>Đơn đã gửi</h1>
                <tr>
                    <th>ID_NV</th>
                    <th>Bắt đầu</th>
                    <th>Kết thúc</th>
                    <th>Trạng thái</th>
                    <th>Huỷ form</th>
                </tr>
                @{
                    List<Form> formlist = ViewData["formList"] as List<Form>;
                    @foreach (Form form in formlist)
                    {
                        <tr>
                            <td> @form.id_nv</td>
                            <td> @form.start</td>
                            <td> @form.end</td>
                            <td> @form.TrangThai</td>
                            <td>
                                <form role="form" method="post" id="@form.Soform">
                                    <button asp-controller="Form" asp-action="DeleteForm" onclick="delelte(@form.Soform)">Cancel</button>
                                </form>
                            </td>
                        </tr>
                    }
                }
            </table>
        </div>
        <div class="col-sm-4 showform">
            <table style="width: 90%">
                <h1>Đơn đã duyệt</h1>
                <tr>
                    <th>ID_NV</th>
                    <th>Bắt đầu</th>
                    <th>Kết thúc</th>
                    <th>Trạng thái</th>
                </tr>
                @{
                    List<Form> formlistCf = ViewData["formListCf"] as List<Form>;
                    @foreach (Form form in formlistCf)
                    {
                        <tr>
                            <td> @form.id_nv</td>
                            <td> @form.start</td>
                            <td> @form.end</td>
                            <td> @form.TrangThai</td>
                        </tr>
                    }
                }
            </table>
        </div>
    </div>
    <script>
        var time=new Date()
        var a= document.createElement("input")
        a.value=time.toLocaleDateString();
        a.style.display="none"
        a.name="id"
        document.getElementsByTagName("form")[0].append(a);
        function delelte(m) {
            var b = document.createElement("input")
            b.value = m;
            b.name = "Soform";
            b.style.display="none"
            document.getElementById(m).append(b);
        }
        function checkTime() {
            let start = new Date(document.getElementById("Start").value);
            let end = new Date(document.getElementById("End").value);

            if (start > end) {
                document.getElementById("err").innerText =
                    "Vui lòng kiểm tra lại thời gian";
                document.getElementById("err").style.display = "block";
            } else{
                document.getElementById("err").innerText =
                    "";
                document.getElementById("err").style.display = "none";
            }
        }

    </script>
</body>